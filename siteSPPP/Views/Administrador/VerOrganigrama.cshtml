@model siteSPPP.Models.ORGANIGRAMA

@{
    ViewBag.Title = "VerOrganigrama";
    Layout = null;
}
<div class="btn-group">
    <input type="button" id="btnSave" value="Guardar Imagen" class="btn btn-secondary m-1" />
</div>
<div id="chart_div">
    <img src="@Url.Action("MostrarFotoOrg", "Administrador", new { id = Model.IDORGANIGRAMA })" width:100% />
</div>
<p>
    @Html.ActionLink("Volver a la Lista", "ListaOrganigramas")
</p>

<script type="text/javascript" src="~/Content/orgchart/jquery-3.3.1.js"></script>
<script type="text/javascript" src="~/Content/orgchart/canvas2image.js"></script>
<script type="text/javascript" src="~/Content/orgchart/html2canvas.min.js"></script>
<script>
    $('#btnSave').click(function () {
        var elm = $('#chart_div').get(0);
        var lebar = "1904";
        var tinggi = "1824";
        var type = "jpg";
        var filename = "Organigrama";
        html2canvas(elm).then(function (canvas) {
            var canWidth = canvas.width;
            var canHeight = canvas.height;
            var img = Canvas2Image.convertToImage(canvas, canWidth, canHeight);
            //$('#img-out').after(img);
            Canvas2Image.saveAsImage(canvas, lebar, tinggi, type, filename);
        })
    })
</script>
